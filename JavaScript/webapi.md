# Web APIs

+ APIæ˜¯ä¸ºæˆ‘ä»¬ç¨‹åºå‘˜æä¾›çš„ä¸€ä¸ªæ¥å£ï¼Œå¸®åŠ©æˆ‘ä»¬å®ç°æŸç§åŠŸèƒ½ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨å°±å¯ä»¥äº†ï¼Œä¸å¿…çº ç»“å…¶å†…åœ¨å®ç°ã€‚
+ Web APIä¸»è¦æ˜¯æµè§ˆå™¨æä¾›æ¥å£ï¼Œå…è®¸æˆ‘ä»¬æ“ä½œBOMå’ŒDOMå…ƒç´ ã€‚
+ APIä¸€èˆ¬éƒ½æ˜¯å‡½æ•°æˆ–æ–¹æ³•ï¼Œæœ‰è¾“å…¥å’Œè¾“å‡ºï¼ŒWeb APIä¹Ÿä¸ä¾‹å¤–ã€‚



## DOM

æ–‡æ¡£å¯¹è±¡æ¨¡å‹ï¼ˆDocument Object Modelï¼‰ï¼Œæ˜¯W3Cé˜»æ­¢æ¨èçš„å¤„ç†å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼ˆHTMLæˆ–XMLï¼‰çš„æ ‡å‡†ç¼–ç¨‹æ¥å£ã€‚

W3Cå·²ç»å®šä¹‰äº†ä¸€ç³»åˆ—çš„DOMæ¥å£ï¼Œé€šè¿‡è¿™äº›DOMæ¥å£å¯ä»¥æ”¹å˜ç½‘é¡µçš„å†…å®¹ã€ç»“æ„å’Œæ ·å¼ã€‚



### DOM æ ‘

![image-20210109150913764](webapi.assets/image-20210109150913764.png)

#### æ¦‚å¿µ

1. èŠ‚ç‚¹ï¼šç½‘é¡µä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯èŠ‚ç‚¹ï¼ˆæ ‡ç­¾ã€å±æ€§ã€æ–‡æœ¬ã€æ³¨é‡Šç­‰ï¼‰ï¼ŒDOMä½¿ç”¨nodeè¡¨ç¤ºèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¹Ÿå°±æ˜¯ä¸€ä¸ªä¸ªèŠ‚ç‚¹å¯¹è±¡ã€‚
2. å…ƒç´ ï¼šHTMLæ ‡ç­¾å°±æ˜¯å…ƒç´ ï¼ŒDOMä¸­ä½¿ç”¨elementè¡¨ç¤ºã€‚
3. æ–‡æ¡£ï¼šä¸€ä¸ªé¡µé¢å°±æ˜¯ä¸€ä¸ªæ–‡æ¡£ï¼ŒDOMä¸­ç”¨documentè¡¨ç¤º



#### å¸¸ç”¨èŠ‚ç‚¹

+ æ–‡æ¡£èŠ‚ç‚¹ï¼Œç‰¹æŒ‡ document
+ å…ƒç´ èŠ‚ç‚¹ï¼Œå³HTMLæ ‡ç­¾å…ƒç´ 
+ å±æ€§èŠ‚ç‚¹ , å¯ä»¥é€šè¿‡element.getAttributeNode(attrName) è·å¾—
+ æ–‡æœ¬èŠ‚ç‚¹



#### èŠ‚ç‚¹çš„å…±æœ‰å±æ€§

|          | nodeName   | nodeType | nodeValue  |
| -------- | ---------- | -------- | ---------- |
| æ–‡æ¡£èŠ‚ç‚¹ | \#document | 9        | null       |
| å…ƒç´ èŠ‚ç‚¹ | æ ‡ç­¾å â­   | 1        | null       |
| å±æ€§èŠ‚ç‚¹ | å±æ€§å     | 2        | å±æ€§å€¼     |
| æ–‡æœ¬èŠ‚ç‚¹ | \#text     | 3 â­      | æ–‡æœ¬å†…å®¹ â­ |



------



### DOM æŸ¥è¯¢

#### å…¼å®¹ IE8ï¼š

+ `document.getElementById(id)`

+ `element.getElementsByTagName(tageName)`

+ `document.getElementsByName(name)`

#### HTML5æ–°å¢ IE9+ï¼š

+ `element.getElementByClassName(className)`
+ `element.querySelector(selector)`
+ `element.querySelectorAll(selector)`

#### ç‰¹æ®Šå…ƒç´ çš„è·å–

+ htmlå…ƒç´ ï¼š`document.documentElement`
+ bodyå…ƒç´ ï¼š`document.body`
+ headå…ƒç´ ï¼š`document.head`



#### æŸ¥è¯¢æ–¹æ³•åˆ†ç±»

1. documentçš„æ–¹æ³•ï¼š

   + getElementById
   + getElementsByName

2. å¯ä»¥å˜åŒ–èŒƒå›´çš„å±äºä¸€èˆ¬elementçš„æ–¹æ³•ï¼š

   + getElementsByTagName
   + getElementsByClassName
   + querySelector
   + querySelectorAll

3. è¿”å›æŸ¥è¯¢åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„ï¼š

   + getElementById
   + querySelector

4. è¿”å›ä¸€ä¸ªNodeListçš„ï¼š

   + getElementsByName
   + getElementsByTagName
   + getElementsByClassName
   + querySelectorAll

   > NodeListæ˜¯ä¸€ä¸ªä¼ªæ•°ç»„ï¼Œåªå®ç°äº†ForEachæ–¹æ³•ã€‚



------



### å±‚çº§å…³ç³»

#### 1. å­èŠ‚ç‚¹

+ `childNodes`å±æ€§

  å±æ€§å€¼ä¸ºå½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹æ‰€ç»„æˆçš„ä¼ªæ•°ç»„`NodeList`ï¼ŒåŒ…å«æ–‡æœ¬å­èŠ‚ç‚¹ã€‚

+ `firstChild`å±æ€§

  å±æ€§å€¼ä¸ºç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œå¦‚æœä¸å­˜åœ¨å­èŠ‚ç‚¹ï¼Œåˆ™å€¼ä¸º`null`

+ `lastChild`å±æ€§

  å±æ€§å€¼ä¸ºæœ€åä¸€ä¸ªå­èŠ‚ç‚¹ï¼Œå¦‚æœä¸å­˜åœ¨å­èŠ‚ç‚¹ï¼Œåˆ™å€¼ä¸º`null`

 

+ `children`å±æ€§

  å±æ€§å€¼ä¸ºå½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰`å­å…ƒç´ èŠ‚ç‚¹`æ‰€ç»„æˆçš„ä¼ªæ•°ç»„`NodeList`ï¼Œä¸åŒ…å«æ–‡æœ¬å­—èŠ‚ç‚¹ã€‚

  > childrenå±æ€§æ˜¯éæ ‡å‡†å±æ€§ï¼Œä½†å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼Œæ”¾å¿ƒä½¿ç”¨ã€‚

+ `firstElementChild`å±æ€§ 

  IE9+æ”¯æŒï¼Œå±æ€§å€¼ä¸ºç¬¬ä¸€ä¸ª`å­å…ƒç´ èŠ‚ç‚¹`ï¼Œå¦‚æœä¸å­˜åœ¨å­å…ƒç´ èŠ‚ç‚¹ï¼Œåˆ™å€¼ä¸º`null`

  > å®é™…å¼€å‘ä¸­å°½é‡ä½¿ç”¨node.children[0]ä»£æ›¿firstElementChild

+ `lastElementChild`å±æ€§

  IE9+æ”¯æŒï¼Œå±æ€§å€¼ä¸ºæœ€åä¸€ä¸ª`å­å…ƒç´ èŠ‚ç‚¹`ï¼Œå¦‚æœä¸å­˜åœ¨å­å…ƒç´ èŠ‚ç‚¹ ï¼Œåˆ™å€¼ä¸º`null`

  > å®é™…å¼€å‘ä¸­å°½é‡ä½¿ç”¨node.children[node.children.length-1]ä»£æ›¿lastElementChild



#### 2. çˆ¶èŠ‚ç‚¹

+ `parentNode`å±æ€§

  è¿”å›å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ã€‚

  > htmlçš„çˆ¶èŠ‚ç‚¹æ˜¯documentï¼Œdocumentçš„çˆ¶èŠ‚ç‚¹æ˜¯nullã€‚



#### 3. å…„å¼ŸèŠ‚ç‚¹

+ `previousSibling`å±æ€§

  å±æ€§å€¼ä¸ºå½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ ï¼ˆå¯èƒ½ä¸ºæ–‡æœ¬èŠ‚ç‚¹ï¼‰ï¼Œè‹¥ä¸å­˜åœ¨åˆ™å€¼ä¸º`null`

+ `nextSibling`å±æ€§

  å±æ€§å€¼ä¸ºå½“å‰èŠ‚ç‚¹çš„åä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹ï¼ˆå¯èƒ½ä¸ºæ–‡æœ¬èŠ‚ç‚¹ï¼‰ï¼Œè‹¥ä¸å­˜åœ¨åˆ™å€¼ä¸º`null`



+ `previousElementSibling`å±æ€§

  IE9+æ”¯æŒï¼Œå±æ€§å€¼ä¸ºå½“å‰èŠ‚ç‚¹çš„å‰ä¸€ä¸ªå…„å¼Ÿ`å…ƒç´ èŠ‚ç‚¹ `ï¼Œè‹¥ä¸å­˜åœ¨åˆ™å€¼ä¸º`null`

+ `nextElementSibling`å±æ€§

  IE9+æ”¯æŒï¼Œå±æ€§å€¼ä¸ºå½“å‰èŠ‚ç‚¹çš„åä¸€ä¸ªå…„å¼Ÿ`å…ƒç´ èŠ‚ç‚¹`ï¼Œè‹¥ä¸å­˜åœ¨åˆ™å€¼ä¸º`null`







------



### DOM æ“ä½œ

#### è¯»å†™æ–‡æœ¬æˆ–HTMLç‰‡æ®µ

é€šè¿‡ä»¥ä¸‹DOMå…ƒç´ çš„å±æ€§ï¼Œå¯ä»¥æ“ä½œå…ƒç´ çš„å†…å®¹ï¼š

1. innerText
2. innerHTML
3. textContent

åŒºåˆ«ï¼š

+ innerTextï¼šè¿”å›ç”±csså†³å®šçš„å¯æ˜¾ç¤ºçš„å­èŠ‚ç‚¹ä¸­æ‰€æœ‰çš„æ–‡æœ¬å†…å®¹ã€‚`display: noneçš„å…ƒç´ çš„æ–‡æœ¬å­èŠ‚ç‚¹ä¼šè¢«å¿½ç•¥`ï¼Œæ–‡æœ¬èŠ‚ç‚¹textä¸¤ç«¯çš„ç©ºç™½å­—ç¬¦ä¼šè¢«å¿½ç•¥ï¼ˆå¯¼è‡´å…¨æ˜¯ç©ºç™½å­—ç¬¦çš„æ–‡æœ¬èŠ‚ç‚¹ä¼šè¢«å¿½ç•¥ï¼‰ï¼Œæ–‡æœ¬èŠ‚ç‚¹textå†…çš„æ¢è¡Œç¬¦å½“ä½œä¸€ä¸ªç©ºæ ¼æ¥å¤„ç†ï¼Œå—å…ƒç´ çš„æ–‡æœ¬ä¸å…¶ä»–æ–‡æœ¬èŠ‚ç‚¹å†…å®¹ä¹‹é—´ç”¨"\n"è¿æ¥ï¼Œå†…è”å…ƒç´ çš„æ–‡æœ¬ä¸æ–‡æœ¬èŠ‚ç‚¹çš„æ–‡æœ¬ä¹‹é—´ç”¨""è¿æ¥ã€‚ç”±äºå—csså½±å“ï¼Œä¼šè§¦å‘å›æµã€‚
+ textContentï¼šä¸å—csså½±å“ï¼ˆ`display: noneçš„å…ƒç´ ä¸ä¼šè¢«å¿½ç•¥`ï¼‰ï¼Œè¿”å›æ‰€æœ‰å­ç»“ç‚¹ä¸­æ‰€æœ‰çš„æ–‡æœ¬å†…å®¹ï¼Œä¿ç•™æ‰€æœ‰ç©ºç™½å­—ç¬¦ã€‚æ–‡æœ¬å†…å®¹é—´ç”¨""è¿æ¥ã€‚
+ innerHTMLï¼šè¿”å›å…ƒç´ çš„HTMLä»£ç ï¼Œä¸å¿½ç•¥ç©ºç™½å­—ç¬¦ï¼Œä¿ç•™æ¢è¡Œç¬¦ã€‚

> ä»¥ä¸Šå±æ€§éƒ½å¯ä»¥è¯»å†™ã€‚

------



#### DOM å¢åˆ æ”¹

**1. åˆ›å»ºæ–‡æœ¬èŠ‚ç‚¹**

`document.createTextNode(text)`

è¿”å›nodeValueä¸ºtextçš„æ–‡æœ¬èŠ‚ç‚¹

```javascript
const tNode = document.createTextNode('hello world');
document.body.appendChild(tNode)
```



**2. åˆ›å»ºå…ƒç´ èŠ‚ç‚¹**

+ ä½¿ç”¨`document.createElement(tagName)`

  è¿”å›æ ‡ç­¾åä¸ºtagNameçš„ç©ºå…ƒç´ èŠ‚ç‚¹

+ ä½¿ç”¨`node.innerHTML`åˆ›å»ºå­æ ‘

  ```javascript
  box.innerHTML = `<div>
  	<ul>
  		<li></li>
  	</ul>
  </div>`
  ```

+ `document.write(htmlText)`

  åœ¨bodyå…ƒç´ ä¸­å†™å…¥æ–°çš„HTMLç‰‡æ®µï¼Œä½†å¦‚æœå®åœ¨æ–‡æ¡£æµå·²ç»è§£æå®Œçš„æƒ…å†µä¸‹è°ƒç”¨è¯¥æ–¹æ³•ï¼Œä¼šè§¦å‘æ–‡æ¡£çš„é‡ç»˜ã€‚

  

> åœ¨ä¸ºå…ƒç´ æ–°å¢å­èŠ‚ç‚¹æˆ–å­æ ‘çš„æ“ä½œä¸­ï¼Œç›¸æ¯”äºcreateElementåˆ›å»ºå…ƒç´ å†æ’å…¥çš„åšæ³•ï¼Œå°†htmlç‰‡æ®µå­—ç¬¦ä¸²èµ‹å€¼ç»™çˆ¶å…ƒç´ çš„innerHTMLå±æ€§çš„åšæ³•æ•ˆç‡æ›´é«˜ã€‚



**3. å‘çˆ¶èŠ‚ç‚¹æ·»åŠ ä¸€ä¸ªå­èŠ‚ç‚¹ï¼ˆå°¾æ’ï¼‰**

`parentNode.appendChild(childNode)`



**4. åœ¨æŒ‡å®šå­èŠ‚ç‚¹å‰æ’å…¥ä¸€ä¸ªå­èŠ‚ç‚¹**

`parentNode.insertBefore(newChild, targetChild)`



**5. æ›¿æ¢ä¸€ä¸ªå­èŠ‚ç‚¹**

`parentNode.replaceChild(newChild, oldChild)`

> å¦‚æœoldChildä¸æ˜¯parentNodeçš„å­èŠ‚ç‚¹ï¼Œåˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚



**6. åˆ é™¤ä¸€ä¸ªå­èŠ‚ç‚¹**

`parentNode.removeChild(childNode)`

> å¦‚æœchildNodeä¸æ˜¯parentNodeçš„å­èŠ‚ç‚¹ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚

```javascript
node.parent.removeChild(node); // è‡ªæ€è¡Œä¸º
```



**7. èŠ‚ç‚¹å…‹éš†**

`node.cloneNode(deep = false)`

è¯¥æ–¹æ³•å±äºDOMNodeï¼Œè¿”å›è°ƒç”¨è¯¥æ–¹æ³•çš„èŠ‚ç‚¹çš„ä¸€ä¸ªå‰¯æœ¬ã€‚ï¼ˆå¦‚æœä¸ºå…ƒç´ èŠ‚ç‚¹ï¼Œåˆ™ä¹Ÿä¼šå¤åˆ¶å…ƒç´ å±æ€§ï¼‰

deepå‚æ•°å¯é€‰ï¼Œæ˜¯å¦é‡‡ç”¨æ·±åº¦å…‹éš†ã€‚

+ å¦‚æœä¸º`true,`åˆ™è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰åä»£èŠ‚ç‚¹ä¹Ÿéƒ½ä¼šè¢«å…‹éš†ï¼Œå³ä¼šè¿”å›ä¸€æ£µèŠ‚ç‚¹æ ‘ã€‚
+ å¦‚æœä¸º`false,åˆ™åªå…‹éš†è¯¥èŠ‚ç‚¹æœ¬èº«ã€‚`é»˜è®¤å€¼ä¸ºfalseã€‚

> **æ³¨æ„:**ä¸ºäº†é˜²æ­¢ä¸€ä¸ªæ–‡æ¡£ä¸­å‡ºç°ä¸¤ä¸ªIDé‡å¤çš„å…ƒç´ ,ä½¿ç”¨`cloneNode()æ–¹æ³•å…‹éš†çš„èŠ‚ç‚¹åœ¨éœ€è¦æ—¶åº”è¯¥æŒ‡å®šå¦å¤–ä¸€ä¸ªä¸åŸIDå€¼ä¸åŒçš„ID` 
>
> åœ¨ DOM4 è§„èŒƒä¸­(å®ç°äºGecko 13.0(Firefox 13.0 / Thunderbird 13.0 / SeaMonkey 2.10))ï¼Œ`deep`æ˜¯ä¸€ä¸ªå¯é€‰å‚æ•°ã€‚å¦‚æœçœç•¥çš„è¯ï¼Œå‚æ•°çš„é»˜è®¤å€¼ä¸º `trueï¼Œ`ä¹Ÿå°±æ˜¯è¯´é»˜è®¤æ˜¯æ·±åº¦å…‹éš†ã€‚å¦‚æœæƒ³ä½¿ç”¨æµ…å…‹éš†, ä½ éœ€è¦å°†è¯¥å‚æ•°è®¾ç½®ä¸º `falseã€‚`
>
> åœ¨æœ€æ–°çš„è§„èŒƒé‡Œï¼Œè¯¥æ–¹æ³•çš„è¡Œä¸ºå·²ç»æ”¹å˜äº†ï¼Œå…¶é»˜è®¤å€¼å˜æˆäº† falseã€‚è™½ç„¶è¯¥å‚æ•°ä»æ—§æ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯ä½ å¿…é¡»è¦ä¸ºè¯¥æ–¹æ³•è®¾ç½® deep å‚æ•°ï¼Œæ— è®ºæ˜¯ä¸ºäº†å‘å‰è¿˜æ˜¯å‘åå…¼å®¹è€ƒè™‘ã€‚å‡å¦‚å¼€å‘è€…æ²¡è®¾ç½®å‚æ•°çš„è¯ï¼ŒGecko 28.0 (Firefox 28 / Thunderbird 28 / SeaMonkey 2.25 / Firefox OS 1.3)) ç‰ˆæœ¬çš„æ§åˆ¶å°ä¼šå‘å‡ºè­¦å‘Šã€‚ä» Gecko 29.0 (Firefox 29 / Thunderbird 29 / SeaMonkey 2.26)) å¼€å§‹è¯¥æ–¹æ³•é»˜è®¤ä¸ºæµ…å¤åˆ¶è€Œä¸æ˜¯æ·±åº¦å¤åˆ¶ã€‚



------



#### è¯»å†™å†…ç½®å±æ€§ä¸è‡ªå®šä¹‰å±æ€§

**1.å†…ç½®å±æ€§çš„è¯»å†™**

å†…ç½®å±æ€§æ˜¯HTMLå„ç±»çš„æ ‡ç­¾æ‰€æ‹¥æœ‰çš„åŸç”Ÿå±æ€§ï¼ŒåŒ…æ‹¬æ™®é€šçš„idã€classã€titleä»¥åŠimgçš„srcç­‰ã€‚

å†…ç½®å±æ€§å¯ä»¥ç›´æ¥é€šè¿‡ `element.xxx `è¯»å†™ã€‚

å†…ç½®å±æ€§ä¹Ÿå¯ä»¥é€šè¿‡`element.getAttribute`è¯»å–ï¼Œé€šè¿‡`element.setAttribute`ä¿®æ”¹ã€‚

> â— éœ€è¦æ³¨æ„çš„æ˜¯è·å–classå±æ€§å€¼æ—¶ï¼Œéœ€è¦ä½¿ç”¨element.classNameï¼Œè€Œä¸æ˜¯class



**2.è‡ªå®šä¹‰å±æ€§çš„è¯»å†™**

è‡ªå®šä¹‰å±æ€§æ˜¯æŒ‡å†…ç½®å±æ€§ä»¥å¤–çš„æ ‡ç­¾å±æ€§ï¼Œå¼€å‘äººå‘˜å¯ä»¥è‡ªå®šä¹‰å±æ€§ä¸Šä¿å­˜æ•°æ®ã€‚

è‡ªå®šä¹‰å±æ€§å¯ä»¥é€šè¿‡element.getAttributeè¯»å–ï¼Œelement.setAttributeä¿®æ”¹ã€‚

> ä½¿ç”¨element.getAttribute(attrName)ï¼Œè‹¥å±æ€§ä¸å­˜åœ¨åˆ™è¿”å›null



â­ H5æ ‡å‡† â­

H5è§„èŒƒä¸­è¦æ±‚è‡ªå®šä¹‰å±æ€§å¿…é¡»ä»¥`data-`å¼€å¤´ã€‚

ä»¥`data-`å¼€å¤´çš„è‡ªå®šä¹‰å±æ€§ï¼Œé™¤äº†å¯ä»¥ç”¨ä¸Šè¿°çš„`getAttribute`å’Œ`setAttribute`è¯»å†™å¤–ï¼Œè¿˜å¯ä»¥åœ¨`element.dataset`ä¸­è®¿é—®ã€‚

```html
<div id="box" data-my-prop="123"></div> <!-- è‡ªå®šä¹‰å±æ€§ data-my-prop -->

<script>
    console.log(box.getAttribute('data-my-prop')); 
    // è¾“å‡º 123
    console.log(box.dataset.myProp); // ğŸ‘ˆ é©¼å³°å‘½åæ³•ï¼Œä¸å¸¦ 'data'
    // è¾“å…¥ 123
    box.dataset.myProp = '321';
    // ç­‰ä»·äºdata.dataset['myProp'] = '321';
    // ç­‰ä»·äº box.setAttribute('data-my-prop', '321');
    
</script>
```

> â— å…¼å®¹æ€§é—®é¢˜ï¼šé€šè¿‡`element.dataset`è®¿é—®è‡ªå®šä¹‰å±æ€§ï¼Œåªæœ‰`IE11+`å…¼å®¹ã€‚



**3. åˆ é™¤å±æ€§**

`element.removeAttribute(attrName)`

å¦‚æœæŒ‡å®šçš„å±æ€§ä¸å­˜åœ¨ä¹Ÿä¸ä¼šç”Ÿæˆé”™è¯¯ã€‚

> è‹¥è¦å½»åº•ç§»é™¤ä¸€ä¸ªå±æ€§çš„æ•ˆæœï¼Œåº”å½“ä½¿ç”¨  `removeAttribute()`ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ [`setAttribute()`](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/setAttribute) å°†å±æ€§å€¼è®¾ç½®ä¸º `null`ã€‚



------



#### ç±»åçš„å¢åˆ æŸ¥

**1.è¯»å–classå±æ€§**

+ element.className å±æ€§ï¼Œè¿”å›æ ‡ç­¾ä¸­classå±æ€§å€¼ï¼Œå­—ç¬¦ä¸²ç±»å‹ã€‚

+ element.classList å±æ€§ï¼Œè¿”å›æ ‡ç­¾ä¸­classå±æ€§å€¼ï¼Œä¼ªæ•°ç»„ç±»å‹`DOMTokenList`ã€‚

+ element.classList.valueï¼Œè¿”å›æ ‡ç­¾ä¸­çš„classå±æ€§ï¼Œå­—ç¬¦ä¸²ç±»å‹ã€‚

+ element.getAttribute('class')ï¼Œè¿”å›æ ‡ç­¾ä¸­classå±æ€§å€¼ï¼Œå­—ç¬¦ä¸²ç±»å‹ã€‚

  

**2.å¢åˆ ç±»å**

+ ç›´æ¥ä¿®æ”¹æ ‡ç­¾çš„classå±æ€§

  ```js
  element.className = '...';
  element.setAttribute('class', '...');
  ```

  **å°è£…æ“ä½œclassNameå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼š**

  ```javascript
  // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ â­
  function elHasClassName(el, cn) {
      const reg = new RegExp(String.raw `\b${cn}\b`);
      return reg.test(el.className);
  }
  // å¢åŠ ä¸€ä¸ªç±»å
  function addClassName(el, cn) {
      if(!elHasClassName(el, cn)) {
          el.className = el.className + ' ' + cn;
      }
  }
  // æ¸…é™¤ä¸€ä¸ªç±»å
  function removeClassName(el, cn) {
      el.className = el.className.replace(new RegExp(`\\b$(cn)\\b`), ''); 
  }
  // åˆ‡æ¢ä¸€ä¸ªç±»å
  function toggleClassName(el, cn) {
      if(elHasClassName(el, cn)) {
          removeClassName(el, cn);
      } else {
          addClassName(el, cn);
      }
  }
  ```

  

+ é€šè¿‡element.classListçš„å„ç§æ–¹æ³•å¢åˆ ç±»å

  ```javascript
  // 1. contains()æ–¹æ³•ï¼Œåˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦å…·æœ‰æŸä¸€ä¸ªç±»å
  element.classList.contains('className');
  
  // 2. add()æ–¹æ³•ï¼Œå¢åŠ ä¸€ä¸ªæˆ–å¤šä¸ªç±»å  å…¼å®¹æ€§:IE10+
  element.classList.add('className1', 'className2...');
  
  // 3. remove()æ–¹æ³•ï¼Œåˆ é™¤1ä¸ªæˆ–å¤šä¸ªç±»å å…¼å®¹æ€§ IE10+
  element.classList.remove('className1', 'className2');
  
  // 4. toggle()æ–¹æ³•ï¼Œåˆ‡æ¢ä¸€ä¸ªç±»åçš„å­˜åœ¨çŠ¶æ€ å…¼å®¹æ€§:IE10+
  element.classList.toggle('className');
  
  // 5. replace()æ–¹æ³•ï¼Œå°†ä¸€ä¸ªç±»åæ›¿æ¢ä¸ºæ–°ç±»å â— å…¼å®¹æ€§ä¸å¥½ï¼Œå°½é‡ä¸è¦ä½¿ç”¨ã€‚å…¶å®ä¹Ÿä¸å¥½ç”¨ã€‚
  element.classList.replace('oldClassName', 'newClassName');
  ```

  > element.classListçš„ç±»å‹`DOMTokenList`ä¸¥æ ¼æ„ä¹‰ä¸Šæ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œä½†èƒ½é€šè¿‡è¯¥ç±»å‹çš„æ–¹æ³•ï¼ˆå¦‚addã€removeï¼‰æ¥æ”¹å˜è‡ªèº«çš„å…ƒç´ ã€‚[å‚è€ƒè¿æ¥](https://developer.mozilla.org/en-US/docs/web/api/element/classlist)



------



#### è¯»å†™æ ·å¼

**1. è¯»å†™å†…è”æ ·å¼**

+ é€šè¿‡`element.style `è¯»å–csså­—ç¬¦ä¸²ï¼Œæˆ– `element.style.æ ·å¼å `è¯»å–æ ·å¼å€¼ã€‚
+ é€šè¿‡ `element.style.æ ·å¼å = æ ·å¼å€¼ `ä¿®æ”¹å†…è”æ ·å¼

> é€šè¿‡JSè®¿é—®å…ƒç´ çš„styleå±æ€§åªèƒ½å¤Ÿè¯»å†™å†…è”æ ·å¼ï¼Œä¸èƒ½è¯»å–åˆ°cssæ ·å¼è¡¨ä¸­çš„æ ·å¼ã€‚



**2.è¯»å–å…ƒç´ å½“å‰æ˜¾ç¤ºçš„æ ·å¼**

+ `element.currentStyle.æ ·å¼å`

  å…¼å®¹æ€§ï¼š**åªæœ‰IEæ”¯æŒ**ã€‚

  å¯è®¿é—®æ€§ï¼šåªè¯»ã€‚

  è‹¥å…ƒç´ æœªè®¾ç½®è¯¥æ ·å¼ï¼Œåˆ™è¿”å›è¯¥æ ·å¼çš„é»˜è®¤å€¼

+ `window.getComputedStyle(element, null)`

  å…¼å®¹æ€§ï¼šåªæœ‰IE9+æ”¯æŒã€‚

  å¯è®¿é—®æ€§ï¼šåªè¯»ã€‚

  å‚æ•°ï¼šgetComputedstyleæ˜¯windowçš„æ–¹æ³•ï¼Œä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æ‰€æ±‚å…ƒç´ ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªä¼ªå…ƒç´ ï¼ˆä¸€èˆ¬è®¾ç½®ä¸ºnullï¼‰ã€‚

  è¿”å›å€¼ï¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°è£…äº†å½“å‰å…ƒç´ çš„æ ·å¼ã€‚

+ `å…¼å®¹æ–¹æ¡ˆ`

  ```javascript
  function getStyle(el, prop) {
      if(window.getComputedStyle) {
          return getComputedStyle(el, null)[prop];
      } else {
          return el.currentStyle[prop];
      }
  } 
  ```

  

------



### DOM äº‹ä»¶

äº‹ä»¶ä¸‰è¦ç´ ï¼š

1. äº‹ä»¶æºï¼Œè°å‘ç”Ÿäº†äº‹ä»¶ã€‚ï¼ˆå¯ä»¥åœ¨å“åº”å‡½æ•°ä¸­ç”¨event.targetè·å–åˆ°ï¼‰
2. äº‹ä»¶ç±»å‹ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆäº‹ä»¶ã€‚
3. äº‹ä»¶å¤„ç†ç¨‹åºï¼Œå°±æ˜¯äº‹ä»¶å“åº”å‡½æ•°ã€‚



#### æ³¨å†Œå’Œç§»é™¤äº‹ä»¶çš„å“åº”å‡½æ•°

**1. ä¼ ç»Ÿæ–¹å¼**

`element.onclick = fn`

`element.onblur = fn`

`....`

+ è¿™ç§æ–¹å¼å…·æœ‰å”¯ä¸€æ€§ï¼Œå³åŒä¸€å…ƒç´ åªèƒ½å¯¹ä¸€ä¸ªäº‹ä»¶æ³¨å†Œä¸€ä¸ªå“åº”å‡½æ•°ï¼Œåé¢æ³¨å†Œçš„ä¼šè¦†ç›–å‰é¢çš„ã€‚

+ ä¸å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚

**ç§»é™¤å“åº”å‡½æ•°ï¼š**`element.onclick = null`



**2. W3Cæ¨èçš„æ–¹å¼ï¼šç›‘å¬äº‹ä»¶**

`element.addEventListener(äº‹ä»¶åï¼Œ fn)`

+ äº‹ä»¶åä¸å¸¦"on"ã€‚
+ å¯ä»¥ä¸ºåŒä¸€äº‹ä»¶ç»‘å®šå¤šä¸ªå“åº”å‡½æ•°ï¼Œå…ˆæ³¨å†Œçš„å…ˆæ‰§è¡Œã€‚

+ å…è®¸è¾“å…¥`ç¬¬ä¸‰ä¸ªå‚æ•°`ï¼Œå¦‚æœç¬¬ä¸‰ä¸ªå‚æ•°ä¸º`true`ï¼Œåˆ™å“åº”å‡½æ•°ä¼šåœ¨`æ•è·é˜¶æ®µæ‰§è¡Œ`ã€‚

**ç§»é™¤å“åº”å‡½æ•°ï¼š**`element.removeEventListener(äº‹ä»¶å, fn)`



**3. IE6~8çš„æ–¹å¼**

`element.attachEvent(onäº‹ä»¶åï¼Œfn)`

+ äº‹ä»¶åå¸¦"on"ã€‚
+ å¯ä»¥ä¸ºåŒä¸€äº‹ä»¶ç»‘å®šå¤šä¸ªå“åº”å‡½æ•°ï¼Œ`å…ˆæ³¨å†Œçš„åæ‰§è¡Œ`ã€‚
+ è¿™ç§æ–¹å¼ç»‘å®šçš„å“åº”å‡½æ•°åªä¼šåœ¨å†’æ³¡é˜¶æ®µæ‰§è¡Œã€‚

**ç§»é™¤å“åº”å‡½æ•°ï¼š** `element.detachEvent(onäº‹ä»¶åï¼Œfn)`



**4. å…¼å®¹æ€§è§£å†³æ–¹æ¡ˆ**

```javascript
// æ³¨å†Œäº‹ä»¶å“åº”å‡½æ•°
function addEventListener(el, evt, fn) {
    if(el.addEventListener) {
        el.addEventListener(evt, fn);
    } else if(el.attachEvent) {
        el.attachEvent('on' + evt, fn);
    } else {
        el['on' + evt] = fn;
    }
}
// ç§»é™¤äº‹ä»¶å“åº”å‡½æ•°
function removeEventListener(el, evt, fn) {
    if(el.removeEventListener) {
        el.removeEventListener(evt, fn);
    } else if(el.detachEvent) {
        el.detachEvent('on' + evt, fn);
    } else {
        el['on' + evt] = null;
    }
}
```





------

#### äº‹ä»¶æµï¼ˆäº‹ä»¶çš„ä¼ æ’­ï¼‰

**æ¦‚å¿µ**

äº‹ä»¶æµæè¿°çš„æ˜¯ä»é¡µé¢ä¸­æ¥æ”¶äº‹ä»¶çš„é¡ºåºã€‚

äº‹ä»¶å‘ç”Ÿæ—¶ä¼šåœ¨å…ƒç´ èŠ‚ç‚¹ä¹‹é—´æŒ‰ç…§`ä»å¤–è‡³å†…ã€ä»å†…å‘å¤–`çš„é¡ºåºä¼ æ’­ï¼Œè¿™ä¸ª`ä¼ æ’­è¿‡ç¨‹`å«åšDOMäº‹ä»¶æµã€‚

æ¯”å¦‚æˆ‘ä»¬ç»™ä¸€ä¸ªdivæ³¨å†Œäº†å•å‡»äº‹ä»¶çš„å“åº”å‡½æ•°ï¼š

![image-20210115202428033](webapi.assets/image-20210115202428033.png) 

**äº‹ä»¶ä¼ æ’­çš„ä¸‰ä¸ªé˜¶æ®µ**

W3Cç»¼åˆäº†ç½‘æ™¯å’Œå¾®è½¯çš„æ–¹æ¡ˆï¼Œå°†DOMäº‹ä»¶æµåˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š

1. æ•è·é˜¶æ®µï¼šä»æœ€å¤–å±‚çš„ç¥–å…ˆå…ƒç´ å‘ç›®æ ‡å…ƒç´ è¿›è¡Œæ•è·ï¼Œä½†é»˜è®¤æ­¤æ—¶ä¸ä¼šè§¦å‘äº‹ä»¶çš„å“åº”å‡½æ•°ã€‚ï¼ˆç½‘æ™¯æå‡ºï¼‰
2. ç›®æ ‡é˜¶æ®µï¼šæ•è·åˆ°ç›®æ ‡å…ƒç´ ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œå“åº”å‡½æ•°ã€‚
3. å†’æ³¡é˜¶æ®µï¼šå‘ç¥–å…ˆå…ƒç´ ä¼ é€’ï¼Œä¾æ¬¡è§¦å‘ç¥–å…ˆå…ƒç´ ä¸Šçš„äº‹ä»¶å“åº”å‡½æ•°ã€‚ï¼ˆå¾®è½¯æå‡ºï¼‰

> + å¦‚æœå¸Œæœ›åœ¨æ•è·é˜¶æ®µæ‰§è¡Œå“åº”å‡½æ•°ï¼Œåˆ™éœ€è¦å°†addEventListeneræ–¹æ³•çš„ç¬¬ä¸‰ä¸ªå‚æ•°è®¾ç½®ä¸ºtrueï¼Œåˆ™è¯¥æ¬¡æ³¨å†Œçš„å“åº”å‡½æ•°ä¼šåœ¨æ•è·é˜¶æ®µæ‰§è¡Œã€‚
> + IE8åŠä»¥ä¸‹æ²¡æœ‰æ•è·é˜¶æ®µï¼Œä½¿ç”¨`ä¼ ç»Ÿæ–¹æ³•`å’Œ`attachEvent`æ–¹æ³•æ³¨å†Œçš„å‡½æ•°æ°¸è¿œ`ä¸ä¼šåœ¨æ•è·é˜¶æ®µæ‰§è¡Œ`ã€‚



â— **è¯¯åŒº** â—ï¼š`åœ¨ç›®æ ‡é˜¶æ®µ`ï¼Œå³ä½¿æ˜¯è®¾ç½®ä¸ºæ•è·é˜¶æ®µæ‰§è¡Œçš„å“åº”å‡½æ•°ï¼Œä¸ä¸€å®šä¼šåœ¨å†’æ³¡å‹å“åº”å‡½æ•°ä¹‹å‰æ‰§è¡Œã€‚

ä¸¾ä¾‹å¦‚ä¸‹ï¼š

```html
<body>
    <div id="box">
        <div id="content"></div>
    </div>
    <script>
        // ä¸º body ç»‘å®šå†’æ³¡é˜¶æ®µçš„å“åº”å‡½æ•°
        document.body.addEventListener('click', e => console.log('bubble body'));
        // ä¸º body ç»‘å®šæ•è·é˜¶æ®µçš„å“åº”å‡½æ•°
		document.body.addEventListener('click', e => console.log('capture body'), true); //true
        // ä¸º div#box ç»‘å®šå†’æ³¡é˜¶æ®µçš„å“åº”å‡½æ•°
        box.addEventListener('click', e => console.log('bubble box'));
        // ä¸º div#box ç»‘å®šæ•è·é˜¶æ®µçš„å“åº”å‡½æ•°
        box.addEventListener('click', e => console.log('capture box'), true); // true
        // ä¸º div#content ç»‘å®šå†’æ³¡é˜¶æ®µçš„å“åº”å‡½æ•°
        content.addEventListener('click', e => console.log('bubble content'));
        // ä¸º div#content ç»‘å®šæ•è·é˜¶æ®µçš„å“åº”å‡½æ•°
       	content.addEventListener('click', e => console.log('capture content'), true); // true
    </script>   
</body>

<!-- ğŸ‘‡ ç»“æœè¾“å‡º ğŸ‘‡ -->
capture body
capture box
bubble content   <!-- ğŸ‘ˆ å…³é”® --> åŸå› æ˜¯åœ¨äº‹ä»¶ä¼ æ’­åˆ°äº†contentæ—¶å·²ç»å¤„äºç›®æ ‡é˜¶æ®µ
capture content  <!-- ğŸ‘ˆ å…³é”® --> ç›®æ ‡é˜¶æ®µä¼šæŒ‰ç…§å‡½æ•°æ³¨å†Œçš„é¡ºåºæ‰§è¡Œï¼Œè€Œä¸ä¼šè€ƒè™‘è¯¥å‡½æ•°æ˜¯åœ¨å“ªä¸ªé˜¶æ®µæ‰§è¡Œ
bubble box
bubble body
<!------------------>

```



 

------



#### äº‹ä»¶å¯¹è±¡

**æ¦‚å¿µ**

å½“DOMäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œæµè§ˆå™¨éƒ½ä¼šæŒ‰ç…§äº‹ä»¶æµå°†ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ä¼ é€’ç»™å„å…ƒç´ çš„å“åº”å‡½æ•°ã€‚

åœ¨äº‹ä»¶å¯¹è±¡ä¸­å°è£…äº†å½“å‰äº‹ä»¶ç›¸å…³çš„ä¸€åˆ‡ä¿¡æ¯ï¼Œæ¯”å¦‚äº‹ä»¶æºã€äº‹ä»¶ç±»å‹ã€é¼ æ ‡çš„åæ ‡ã€é”®ç›˜çš„é”®ä½ç­‰ã€‚



**å…¼å®¹æ€§**

IE6~8æµè§ˆå™¨å°†äº‹ä»¶å¯¹è±¡ä¿å­˜åœ¨äº†window.eventå±æ€§ä¸­ã€‚

```javascript
element.onclick = function (evt) {
    evt = evt || window.event;
    console.log(evt);
}
```



**äº‹ä»¶å¯¹è±¡çš„å¸¸è§å±æ€§å’Œæ–¹æ³•**

| äº‹ä»¶å¯¹çš„å±æ€§å’Œæ–¹æ³•        | è¯´æ˜                                                         |
| ------------------------- | ------------------------------------------------------------ |
| e.target                  | è¿”å›è§¦å‘äº‹ä»¶çš„æºå¯¹è±¡    âœ” æ ‡å‡†  â­                            |
| window.event.srcElement   | è¿”å›è§¦å‘äº‹ä»¶çš„æºå¯¹è±¡    âŒ éæ ‡å‡†ï¼ŒIE6~8ä½¿ç”¨                  |
| e.type                    | è¿”å›æ—¶é—´çš„ç±»å‹ æ¯”å¦‚ click mouseover ä¸å¸¦"on" â­               |
| window.event.cancelBubble | å¸ƒå°”å€¼ï¼Œè¯¥å±æ€§å€¼è®¾ä¸ºfalseåˆ™é˜»æ­¢å†’æ³¡ âŒ éæ ‡å‡† ï¼ŒIE6~8ä½¿ç”¨     |
| window.event.returnValue  | å¸ƒå°”å€¼ï¼Œè¯¥å±æ€§å€¼è®¾ä¸ºfalseåˆ™é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º âŒéæ ‡å‡† IE6~8ä½¿ç”¨ï¼Œ Chromeã€ç«ç‹å…¼å®¹ï¼ŒIE9+åè€Œä¸å…¼å®¹ã€‚                                                                                    åæ­£å°±ä¸è¦ç”¨è¿™ä¸ªå±æ€§äº†, ç”¨return falseå°±å¯ä»¥ã€‚ |
| e.preventDefault()        | è¯¥æ–¹æ³•é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º         âœ” æ ‡å‡†   â­                  |
| e.preventPropagation()    | è¯¥æ–¹æ³•é˜»æ­¢äº‹ä»¶çš„ä¼ æ’­ï¼ŒåŒ…æ‹¬æ•è·å’Œå†’æ³¡ã€‚ âœ” æ ‡å‡† â­              |

> åœ¨äº‹ä»¶çš„å“åº”å‡½æ•°ä¸­ï¼Œè¦åŒºåˆ†this å’Œ e.targetï¼Œthisä¸ä¸€å®šæ˜¯äº‹ä»¶æºã€‚



------



#### é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸º

1. `preventDefault()`
2. `return false`
3. `event.returnValue = false` âŒ å…¼å®¹æ€§å¾ˆå¥‡è‘©ï¼Œä¸æ¨èä½¿ç”¨

```javascript
document.querySelector('a').onclick = function (e) {
    e = e || window.event;
    // ç¬¬ä¸€ç§æ–¹å¼
    if(e.preventDefault) e.preventDefault();  // IE9+æ”¯æŒ
    
    // .....
    // å› ä¸ºIE6~8 ä¸è®¤è¯† preventDefaultæ–¹æ³•

    // ç¬¬äºŒç§æ–¹å¼
    e.returnValue = false; // âŒ IE9~11ä¸æ”¯æŒï¼ŒIE6~8æ”¯æŒï¼Œå…¶ä»–æµè§ˆå™¨æ”¯æŒã€‚
    
    // ç¬¬ä¸‰ç§æ–¹å¼ï¼Œå…¼å®¹æ‰€æœ‰æµè§ˆå™¨çš„æ–¹æ³• ğŸ‘‡
    return false;  // å…¼å®¹æ€§åšæ³• 
    
}
```



------



#### é˜»æ­¢äº‹ä»¶å†’æ³¡

1. `event.preventPropagation()`  ğŸ‘ˆ IE9+ ä¸åªæ˜¯é˜»æ­¢å†’æ³¡ï¼Œä¹Ÿä¼šä¸­æ–­äº‹ä»¶çš„æ•è·ã€‚
2. `window.event.cancelBubble = true` ğŸ‘ˆ IE6~8

```javascript
document.querySelector('div').onclick = function(e) {
    e = e || window.event;
    if(e.preventPropagation) {
        e.preventPropagation();
    } else {
        e.cancelBubble = true;
    }
}
```





#### å†’æ³¡çš„åº”ç”¨ï¼šäº‹ä»¶å§”æ‰˜

äº‹ä»¶å§”æ‰˜ä¹Ÿç§°ä¸ºäº‹ä»¶ä»£ç†ï¼Œåœ¨jQueryä¸­ä¹Ÿå«åšäº‹ä»¶å§”æ´¾ã€‚

**åŸç†ï¼š**

ä¸æ˜¯åœ¨æ¯ä¸ªå­èŠ‚ç‚¹ä¸Šå•ç‹¬è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ï¼Œè€Œæ˜¯åœ¨çˆ¶èŠ‚ç‚¹ä¸Šè®¾ç½®äº‹ä»¶ç›‘å¬å™¨ï¼Œç„¶ååˆ©ç”¨å†’æ³¡åŸç†ç›‘å¬æ‰€æœ‰å­èŠ‚ç‚¹çš„æŸä¸ªäº‹ä»¶ã€‚



------



#### å¸¸ç”¨çš„é¼ æ ‡äº‹ä»¶

| é¼ æ ‡äº‹ä»¶     | è§¦å‘æ¡ä»¶                                           |
| ------------ | -------------------------------------------------- |
| onclick      | é¼ æ ‡å·¦é”®å•å‡»ä¸€æ¬¡è§¦å‘                               |
| ondbclick    | é¼ æ ‡å·¦é”®åŒå‡»ä¸€æ¬¡è§¦å‘                               |
| onmouseover  | é¼ æ ‡è¿›å…¥å…ƒç´ èŒƒå›´è§¦å‘ï¼Œ`ä¼šè¿›è¡Œå†’æ³¡`ã€‚               |
| onmouseout   | é¼ æ ‡ç¦»å¼€å…ƒç´ èŒƒå›´è§¦å‘ï¼Œ`ä¼šè¿›è¡Œå†’æ³¡`ã€‚               |
| onfocus      | è·å¾—é¼ æ ‡ç„¦ç‚¹                                       |
| onblur       | å¤±å»é¼ æ ‡ç„¦ç‚¹                                       |
| onmousemove  | é¼ æ ‡åœ¨å…ƒç´ èŒƒå›´å†…ç§»åŠ¨â€œ1pxâ€è§¦å‘ã€‚                    |
| onmousedown  | é¼ æ ‡æŒ‰ä¸‹ä¸€æ¬¡è§¦å‘ã€‚æ»šè½®ã€å³é”®ã€ä¸Šä¸‹ç¿»é¡µé”®ä¹Ÿä¼šè§¦å‘ã€‚ |
| onmouseup    | é¼ æ ‡æ¾å¼€ä¸€æ¬¡è§¦å‘ã€‚æ»šè½®ã€å³é”®ã€ä¸Šä¸‹ç¿»é¡µé”®ä¹Ÿä¼šè§¦å‘ã€‚ |
| onmouseenter | é¼ æ ‡è¿›å…¥å…ƒç´ èŒƒå›´è§¦å‘ï¼Œ`ä¸ä¼šå†’æ³¡`ã€‚â­                |
| onmouseleave | é¼ æ ‡ç¦»å¼€å…ƒç´ èŒƒå›´è§¦å‘ï¼Œ`ä¸ä¼šå†’æ³¡`ã€‚â­                |

+ onmousedownäº‹ä»¶ï¼Œå•æ¬¡ç‚¹å‡»åªä¼šè§¦å‘ä¸€æ¬¡ï¼Œç›´åˆ°æ¾å¼€é¼ æ ‡é”®åæ‰ä¼šè§¦å‘ä¸‹ä¸€æ¬¡ã€‚

+ onmouseenter/ onmouseleave å’Œ onmouseover/ onmouseout ä¹‹é—´çš„åŒºåˆ«æ˜¯ â€œæ˜¯å¦ä¼šè§¦å‘å†’æ³¡â€ã€‚

  å‰ä¸€ç»„ä¸ä¼šè§¦å‘å†’æ³¡ï¼Œæ‰€ä»¥å½“é¼ æ ‡åœ¨`çˆ¶å®¹å™¨`çš„`åä»£å…ƒç´ `ä¸­è¿›å‡ºæ—¶ï¼Œ`ä¸ä¼šè§¦å‘`çˆ¶å®¹å™¨çš„é¼ æ ‡enter/ leaveã€‚

  åä¸€ç»„ä¼šè§¦å‘å†’æ³¡ï¼Œæ‰€ä»¥å½“é¼ æ ‡åœ¨`çˆ¶å®¹å™¨`çš„`åä»£å…ƒç´ `ä¸­è¿›å‡ºæ—¶ï¼Œ`ä¼šå¤šæ¬¡è§¦å‘`çˆ¶å®¹å™¨çš„é¼ æ ‡over/ outã€‚

  > é¼ æ ‡ä»åä»£å…ƒç´ èŒƒå›´ä¸­æŒªå‡ºï¼Œè¿›å…¥çˆ¶å®¹å™¨ç‹¬æœ‰çš„èŒƒå›´ä¼šå…ˆå†’æ³¡onmouseoutï¼Œç„¶åå†æ¬¡è§¦å‘çˆ¶å®¹å™¨çš„onmouseoverã€‚



**é¼ æ ‡äº‹ä»¶å¯¹è±¡çš„å±æ€§**

+ `type`å±æ€§æ ‡è¯†äº†é¼ æ ‡äº‹ä»¶çš„ç±»å‹ï¼Œå¦‚click, mousedown, mouseenterç­‰ã€‚

+ `which`å±æ€§æ ‡è¯†äº†é¼ æ ‡æŒ‰é”®ã€‚

  1ï¼šæ²¡æœ‰æŒ‰é”®æˆ–å·¦é”®

  2ï¼šæ»šè½®æŒ‰ä¸‹

  3ï¼šå³é”®

+ `clientX` / `clientY` å±æ€§ï¼Œæ˜¯é¼ æ ‡äº‹ä»¶å‘ç”Ÿçš„ä½ç½®ç›¸å¯¹äºæµè§ˆå™¨è§†å£å·¦ä¸Šè§’çš„åç§»é‡ã€‚

+ `pageX` / `pageY` å±æ€§ï¼Œæ˜¯é¼ æ ‡äº‹ä»¶å‘ç”Ÿçš„ä½ç½®ç›¸å¯¹äºé¡µé¢ï¼ˆå¸ƒå±€è§†å£ï¼‰å·¦ä¸Šè§’çš„åç§»é‡ã€‚ä¸è®ºé¡µé¢æ€ä¹ˆæ»šåŠ¨ï¼Œé¼ æ ‡ç‚¹å‡»é¡µé¢ä¸­åŒä¸€ä½ç½®æ—¶ï¼Œevent.pageX å’Œ event.pageYçš„å€¼ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚

  > pageX / pageYå±æ€§ä»…åœ¨ IE9+ä¸­æ”¯æŒã€‚

+ `screenX` / `screenY` å±æ€§ï¼Œæ˜¯é¼ æ ‡äº‹ä»¶å‘ç”Ÿçš„ä½ç½®ç›¸å¯¹äºè®¾å¤‡å±å¹•å·¦ä¸Šè§’çš„åç§»é‡ã€‚

------



#### å¸¸ç”¨çš„é”®ç›˜äº‹ä»¶

| é”®ç›˜äº‹ä»¶   | è§¦å‘æ¡ä»¶                                                     |
| ---------- | ------------------------------------------------------------ |
| onkeyup    | æŸä¸ªé”®ç›˜æŒ‰é”®æ¾å¼€æ—¶ä¼š`è§¦å‘ä¸€æ¬¡`ã€‚â­ å°½å¯èƒ½ç”¨onkeyupï¼Œå› ä¸ºä¸ä¼šä¸æ–­è§¦å‘ã€‚ |
| onkeydown  | æŸä¸ªé”®ç›˜æŒ‰é”®å¤„äºæŒ‰ä¸‹çŠ¶æ€æ—¶ä¼š`ä¸æ–­è§¦å‘`ã€‚â—                    |
| onkeypress | æŸä¸ªé”®ç›˜æŒ‰é”®å¤„äºæŒ‰ä¸‹çŠ¶æ€æ—¶ä¼š`ä¸æ–­è§¦å‘`ã€‚â—                    |

onkeydownå’Œonkeypressçš„åŒºåˆ«åœ¨äºï¼š

1. onkeypressä¸ä¼šè¯†åˆ«åŠŸèƒ½é”®ã€‚å³Backspaceã€ctrlã€altã€shiftã€ç®­å¤´æ–¹å‘é”®æŒ‰ä¸‹æ—¶ï¼Œä¸ä¼šè§¦å‘onkeypressäº‹ä»¶ã€‚

   è€Œonkeydownèƒ½å¤Ÿè¯†åˆ«åŠŸèƒ½é”®ã€‚

2. onkeydownä¸åŒºåˆ†æŒ‰é”®çš„å¤§å°å†™ï¼Œå³æŒ‰ä¸‹aå’Œå¤§å†™Aæ—¶éƒ½è®¤ä¸ºæŒ‰ä¸‹äº†"a"ï¼ŒkeyCodeéƒ½æ˜¯97ã€‚

3. åœ¨å‡½æ•°æ‰§è¡Œé¡ºåºä¸Šï¼Œonkeydownäº‹ä»¶ç»‘å®šçš„å“åº”å‡½æ•°ä¼šå…ˆäºonkeypressäº‹ä»¶ç»‘å®šçš„å“åº”å‡½æ•°ã€‚

> åœ¨inputæ ‡ç­¾ä¸­onkeydown/ onkeypressäº‹ä»¶çš„å›è°ƒå‡½æ•°ä¼šå…ˆäºinputæ ‡ç­¾æ›´æ–°valueæ‰§è¡Œã€‚
>
> æ‰€ä»¥è¦è·å–é”®ç›˜è¾“å…¥åçš„inputçš„valueå€¼ï¼Œåº”è¯¥åœ¨onkeyupçš„å“åº”å‡½æ•°ä¸­æ‰èƒ½è·å–ã€‚



**é”®ç›˜äº‹ä»¶å¯¹è±¡çš„å±æ€§**

+ `keyCode`å±æ€§

  é”®ç›˜é”®ä½çš„ascç å€¼

  

+ `key`å±æ€§ï¼ŒIE9+æ”¯æŒ

  é”®ç›˜é”®ä½çš„ç‰¹å¾å­—ç¬¦ä¸²

  1. å›è½¦ Enter
  2. é€€æ ¼ Backspace
  3. å¤§å†™é”® CapsLock
  4. å¤§å†™é”®ç›˜å¼€å¯æŒ‰a A
  5. ....

------



#### å…¶ä»–äº‹ä»¶

**1. é˜»æ­¢é¼ æ ‡å³é”®èœå•çš„æ˜¾ç¤º**

`oncontextmenu`äº‹ä»¶

```javascript
document.addEventListener('contextmenu', e => e.preventDefault()); // è¿™é‡Œå¥½åƒä¸èƒ½ç”¨return false
// html.addEventListener('contextmenu', e => e.preventDefault()); å¯¹htmlç»‘å®šä¹Ÿå¯ä»¥
// å¯¹å…¶ä»–æŒ‡å®šDOMå…ƒç´ ç»‘å®šä¹Ÿå¯ä»¥ï¼Œå®ç°é˜»æ­¢å±€éƒ¨èŒƒå›´å†…å³é”®èœå•çš„æ˜¾ç¤ºã€‚
```



**2. ä¸å…è®¸é€‰ä¸­å†…å®¹**

`selectstart`äº‹ä»¶

```javascript
document.querySelector('p').addEventListener('selectstart', e => e.preventDefault());
```





## BOM

Browser Object Modelï¼Œæµè§ˆå™¨å¯¹è±¡æ¨¡å‹ï¼Œå®ƒæä¾›ç‹¬ç«‹äºå†…å®¹è€Œä¸æµè§ˆå™¨çª—å£è¿›è¡Œäº¤äº’çš„å¯¹è±¡ï¼Œå…¶`æ ¸å¿ƒ+é¡¶çº§`çš„å¯¹è±¡æ˜¯windowã€‚

ç®€è€Œè¨€ä¹‹ï¼ŒBOMä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç»„å¯¹è±¡ï¼Œç”¨æ¥å®Œæˆå¯¹æµè§ˆå™¨çš„æ“ä½œã€‚

> BOMç¼ºä¹æ ‡å‡†ï¼Œ JavaScriptè¯­æ³•çš„æ ‡å‡†åŒ–ç»„ç»‡æ˜¯ECMAï¼ŒDOMçš„æ ‡å‡†åŒ–é˜»æ­¢æ˜¯W3Cï¼Œè€ŒBOMæœ€åˆæ˜¯Netscapeæµè§ˆå™¨æ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚



### BOMçš„æ„æˆ

BOMæ¯”DOMæ›´å¤§ï¼Œå®ƒåŒ…å«äº†DOMã€‚

![image-20210123104526159](webapi.assets/image-20210123104526159.png) 

### windowå¯¹è±¡

<font color="red">windowå¯¹è±¡æ˜¯æµè§ˆå™¨çš„é¡¶çº§å¯¹è±¡ï¼Œå®ƒå…·æœ‰åŒé‡è§’è‰²</font>

1. å®ƒæ˜¯JSè®¿é—®æµè§ˆå™¨çš„ä¸€ä¸ªæ¥å£

2. å®ƒæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚å®šåœ¨`å…¨å±€ä½œç”¨åŸŸä¸­çš„å˜é‡å’Œå‡½æ•°`ä¼šåˆ†åˆ«æˆä¸º`windowå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•`ã€‚

   åœ¨è°ƒç”¨å…¨å±€å‡½æ•°ã€è®¿é—®å…¨å±€å˜é‡æ—¶ï¼Œå¯ä»¥çœç•¥ä¹¦å†™windowã€‚

   > æ³¨æ„ï¼šwindowä¸‹å­˜åœ¨ä¸€ä¸ªç‰¹æ®Šå±æ€§window.nameï¼Œæ‰€ä»¥ä¸è¦åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ç”¨"name"ä½œä¸ºå˜é‡åã€‚

------

#### onloadäº‹ä»¶

```javascript
window.onload = function () {
    ...
};

// æˆ–è€…ä½¿ç”¨æ ‡å‡†æ–¹æ³•å¯ç»‘å®šå¤šä¸ªé¡µé¢åŠ è½½å®Œæˆçš„å“åº”å‡½æ•°
window.addEventListener('load', function () { 
    ...
});
```

window.onloadæ˜¯çª—å£ï¼ˆé¡µé¢ï¼‰åŠ è½½äº‹ä»¶ï¼Œå½“æ–‡æ¡£çš„å†…å®¹`å®Œå…¨åŠ è½½å®Œæˆ`åæ‰ä¼šè§¦å‘è¯¥äº‹ä»¶ï¼Œ`åŒ…æ‹¬å›¾åƒçš„åŠ è½½ã€è„šæœ¬æ–‡ä»¶ã€CSSæ–‡ä»¶ç­‰`ã€‚

------

#### DOMContentLoadedäº‹ä»¶

```javascript
window.addEventListener('DOMContentLoaded', function() {});
// è¿™ä¸ªäº‹ä»¶åªèƒ½è¿™æ ·ç»‘å®šå“åº”å‡½æ•°
```

DOMContentLoadedäº‹ä»¶ä¼šåœ¨`DOMåŠ è½½å®Œæˆæ—¶`å°±è§¦å‘ï¼Œ`ä¸ä¼šç­‰å¾…å›¾ç‰‡ã€flashã€æ ·å¼è¡¨çš„åŠ è½½`ã€‚

> â— å…¼å®¹æ€§ï¼šIE9+æ”¯æŒï¼Œä¸”åªèƒ½ä½¿ç”¨æ ‡å‡†æ–¹æ³•ç»‘å®šå“åº”å‡½æ•°ã€‚

å¦‚æœ`é¡µé¢çš„å›¾ç‰‡å¾ˆå¤š`çš„è¯ï¼Œä»é¡µé¢æ‰“å¼€åˆ°onloadäº‹ä»¶è§¦å‘å¯èƒ½éœ€è¦å¾ˆé•¿çš„äº‹ä»¶ï¼Œäº¤äº’æ•ˆæœå°±ä¸èƒ½å®ç°ï¼Œå¿…ç„¶å½±å“ç”¨æˆ·çš„ä½“éªŒï¼Œæ­¤æ—¶ç”¨DOMContentLoadedäº‹ä»¶æ¯”è¾ƒåˆé€‚ã€‚

------

#### onresizeäº‹ä»¶

```javascript
window.onresize = function() {};
// 
window.addEventListener('resize', function(){});
```

window.onresizeæ˜¯è°ƒæ•´æµè§ˆå™¨çª—å£å¤§å°çš„äº‹ä»¶ã€‚

åªè¦çª—å£çš„å°ºå¯¸å‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚æˆ‘ä»¬ä¼šåˆ©ç”¨è¿™ä¸ªäº‹ä»¶å®Œæˆ`å“åº”å¼å¸ƒå±€ã€ç§»åŠ¨ç«¯é€‚é…`ç­‰ï¼Œä¼šç”¨åˆ°ç›¸å…³çš„å±æ€§æœ‰`window.innerWidth`ã€`window.innerHeigth`ã€‚

> â­åŒºåˆ«ï¼šwindow.innerWidth / window.innerHeightå’ŒdocumentElement.clientWidthã€clientHeightéƒ½æ˜¯æè¿°æµè§ˆå™¨è§†å£å°ºå¯¸çš„å±æ€§ï¼Œä»–ä»¬çš„åŒºåˆ«åœ¨äºå‰ä¸€ç»„åŒ…å«htmlæ»šåŠ¨æ¡çš„å®½åº¦ï¼Œåä¸€ç»„ä¸åŒ…å«htmlæ»šåŠ¨æ¡çš„å®½åº¦ã€‚
>
> æ­¤å¤–ï¼Œwindowè¿˜æœ‰`outerWidth`å’Œ`outerHeight`å±æ€§ï¼Œä»–ä»¬è¡¨ç¤ºæ•´ä¸ªæµè§ˆå™¨çª—å£çš„å°ºå¯¸ï¼ŒåŒ…å«èœå•ã€å·¥å…·æ ç­‰ã€‚

------

#### å¯¹è¯æ¡†æ–¹æ³•

1. `alert(message)` æ˜¾ç¤ºå¸¦æœ‰ä¸€æ®µæ¶ˆæ¯å’Œä¸€ä¸ªç¡®è®¤æŒ‰é’®çš„å¯¹è¯æ¡†ã€‚

   > å‚æ•°messageæ˜¯å¯¹è¯æ¡†ä¸­è¦æ˜¾ç¤ºçš„ä¿¡æ¯ã€‚

   

2. `confirm(message)`æ˜¾ç¤ºå¸¦æœ‰ä¸€æ®µæ¶ˆæ¯å’Œç¡®è®¤ã€å–æ¶ˆä¸¤ä¸ªæŒ‰é’®çš„å¯¹è¯æ¡†ã€‚

   > `messageå‚æ•°`æ˜¯å¯¹è¯æ¡†ä¸­çš„æç¤ºä¿¡æ¯ï¼Œconfirmæ–¹æ³•ä¼š`è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼`ï¼Œå½“ç”¨æˆ·ç‚¹å‡»ç¡®è®¤ä¼šè¿”å›`true`ï¼Œå–æ¶ˆä¼šè¿”å›`false`ã€‚

   ```javascript
   let ret = window.confirm('å½“å‰æ“ä½œä¼šå¼•å‘å±é™©ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ');
   if(ret) {
       // continue
   } else {
       // stop
   }
   ```

   

3. `prompt(message, value)`æ˜¾ç¤ºå¯æç¤ºç”¨æˆ·è¾“å…¥çš„å¯¹è¯æ¡†ã€‚

   > `messageå‚æ•°`æ˜¯å¯¹è¯æ¡†ä¸­çš„æç¤ºä¿¡æ¯ï¼Œ`valueå‚æ•°`æ˜¯è¾“å…¥æ¡†ä¸­çš„é»˜è®¤å€¼ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚`promptæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²`ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯ç”¨æˆ·åœ¨å¯¹è¯æ¡†çš„è¾“å…¥æ¡†ä¸­è¾“å…¥çš„å†…å®¹ã€‚

   ```javascript
   let ret = window.prompt('è¯·è¾“å…¥æ‚¨æƒ³è¾“å…¥çš„å†…å®¹');
   console.log(ret);
   ```

   

#### å®šæ—¶å™¨æ–¹æ³•

1. `setTimeout(cb, timeout) / clearTimeout(timer)`

2. `setInterval(cb, interval) / clearInterval(timer)`

   

------

### locationå¯¹è±¡

locationå¯¹è±¡æ˜¯windowå¯¹è±¡çš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒæä¾›äº†è¯»å†™æµè§ˆå™¨çª—ä½“çš„URLçš„æ¥å£ï¼Œå¹¶ä¸”å°è£…äº†å¯¹URLçš„è§£æç»“æœã€‚

URLçš„ä¸€èˆ¬è¯­æ³•æ ¼å¼ä¸ºï¼š

`protocol://hostName[:port]/path/[?query]#fagnent`



#### locationå¯¹è±¡çš„å±æ€§

1. `href` æ•´ä¸ªURL
2. `protocol` åè®®å + ":"
3. `host` IPåœ°å€ / åŸŸå + ç«¯å£å·
4. `hostname` IPåœ°å€ / åŸŸå
5. `pathname` pathå­—ç¬¦ä¸²ï¼Œ"/" å¼€å¤´
6. `search` queryå­—ç¬¦ä¸²ï¼Œ"?" å¼€å¤´
7. `hash` fragnentå­—ç¬¦ä¸²ï¼Œ"#" å¼€å¤´



#### locationå¯¹è±¡çš„æ–¹æ³•

1. `assign(url)` 

   ç”¨äºè·³è½¬é¡µé¢ï¼Œä½œç”¨å’Œç›´æ¥ä¿®æ”¹`location`æˆ–`location.href`æ•ˆæœç›¸åŒã€‚

2. `replace(url)`

   åŒæ ·æ˜¯ç”¨äºè·³è½¬é¡µé¢ï¼Œç”¨æ³•å’Œ`assign`ç›¸åŒï¼Œä½†ä¼šé‡ç½®æ ˆé¡¶å¹¶è·³è½¬ï¼Œå³æ— æ³•å›é€€åˆ°å‰ä¸€ä¸ªurlå¯¹åº”çš„é¡µé¢ã€‚

3. `reload([forcedReload])`

   ç”¨äºåˆ·æ–°é¡µé¢ï¼Œä½œç”¨ç›¸å½“äºæŒ‰ä¸‹`F5`ã€‚forcedReloadå‚æ•°å¯é€‰ï¼Œè¡¨ç¤ºæ˜¯å¦å¼ºåˆ¶æ¸…é™¤ç¼“å­˜ï¼Œå¦‚æœä¸º`true`ï¼Œç›¸å½“äºæŒ‰ä¸‹`ctrl+F5`

   ```javascript
   location.reload(true);
   ```

   

#### é€šè¿‡locationå¯¹è±¡è¿›è¡Œé¡µé¢è·³è½¬

å®ç°è·³è½¬çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼š

+ ```javascript
  location = url;
  ```

+ ```javascript
  location.href = url;
  ```

+ ```javascript
  location.assign(url);
  ```

+ ```javascript
  location.replace(url);
  ```

> urlè¦æ±‚æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œå¯ä»¥æ˜¯å®Œæ•´çš„urlï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥æ˜¯ä»¥"/"å¼€å¤´çš„æ ¹è·¯å¾„ã€‚

```javascript
location.assign('https://www.baidu.com');
location.assign('image/1.png');
location.assign('../index.html');
location.assign('/index.html');
```



------

### historyå¯¹è±¡

windowå¯¹è±¡çš„historyå±æ€§è®©æˆ‘ä»¬èƒ½å¤Ÿä¸æµè§ˆå™¨çš„å†å²è®°å½•è¿›è¡Œäº¤äº’ã€‚

#### historyå¯¹è±¡çš„å±æ€§

1. `length`

   å¯ä»¥è·å–åˆ°å½“å‰è®¿é—®è¿‡çš„é“¾æ¥æ•°é‡ï¼Œå…¶å®å°±æ˜¯ä¿å­˜è®¿é—®urlé¡ºåºçš„æ ˆç»“æ„çš„é•¿åº¦ã€‚



#### å‰åè·³è½¬é¡µé¢çš„æ–¹æ³•

1. `history.go(n)`

   ä¼ å…¥ä¸€ä¸ªæ•´æ•°å‚æ•°ï¼Œè¡¨ç¤ºè·³è½¬æ­¥é•¿ï¼Œæ­£ä¸ºå‰è¿›ï¼Œè´Ÿä¸ºåé€€ã€‚

   ```javascript
   history.go(1)
   ```

2. `history.back()`

   å›é€€åˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼Œä½œç”¨å’Œæµè§ˆå™¨å›é€€æŒ‰é’®ä¸€æ ·ï¼Œç›¸å½“äº`history.go(-1)`ã€‚

3. `history.forward()`

   è·³è½¬åˆ°ä¸‹ä¸€ä¸ªé¡µé¢ï¼Œä½œç”¨å’Œæµè§ˆå™¨å‰è¿›æŒ‰é’®ä¸€æ ·ï¼Œç›¸å½“äº`history.go(1)`ã€‚



#### H5æ–°å¢æ–¹æ³•ï¼ˆä¸å‰ç«¯è·¯ç”±ç›¸å…³ï¼‰

ğŸ• åç»­è¡¥å……



------



### navigatorå¯¹è±¡

navigatorå¯¹è±¡åŒ…å«æœ‰å…³å®¢æˆ·ç«¯çš„ä¿¡æ¯ï¼Œå®ƒæœ‰å¾ˆå¤šç†Ÿæ‚‰ï¼Œæˆ‘ä»¬æœ€å¸¸ç”¨çš„æ˜¯`navigator.userAgent`ã€‚

`navigator.userAgent `æ˜¯ä¸€ä¸ªåªè¯»çš„å­—ç¬¦ä¸²ï¼Œå£°æ˜äº†æµè§ˆå™¨ç”¨äº `HTTP è¯·æ±‚çš„ç”¨æˆ·ä»£ç†å¤´`çš„å€¼ã€‚

`User-Agent`æ˜¯HTTPè¯·æ±‚ä¸­çš„ç”¨æˆ·æ ‡è¯†ï¼Œä¸€èˆ¬å‘é€ä¸€ä¸ªèƒ½å¤Ÿä»£è¡¨å®¢æˆ·ç«¯ç±»å‹çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚æµè§ˆå™¨ç±»å‹ æ“ä½œç³»ç»Ÿç­‰ä¿¡æ¯ã€‚User-Agent çš„çº¦å®šæ ¼å¼æ˜¯ï¼šåº”ç”¨åï¼Œè·Ÿä¸€ä¸ªæ–œçº¿ï¼Œè·Ÿç‰ˆæœ¬å·ï¼Œå‰©ä¸‹çš„æ˜¯è‡ªç”±çš„æ ¼å¼ã€‚

> ä¸€èˆ¬éƒ½æ˜¯ä»¥ Mozilla/5.0 å¼€å¤´

å¯¹äºå‰ç«¯è€Œè¨€ï¼š

`navigator.userAgent`å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¯†åˆ«è®¾å¤‡ã€å¹³å°ã€æµè§ˆå™¨ï¼Œä»è€Œè¿›è¡Œå…¼å®¹å¤„ç†ã€‚

> æ ¹æ®å…·ä½“æƒ…å†µï¼Œåˆ°ç™¾åº¦æŸ¥æ‰¾è¯†åˆ«æ–¹æ³•ã€‚å› ä¸ºnavigator.userAgentå±æ€§å€¼åƒå¥‡ç™¾æ€ªï¼Œç¼ºä¹æ ‡å‡†ã€‚

å¯¹äºåç«¯è€Œè¨€ï¼š

`navigator.userAgent`ä¼šèµ‹å€¼ç»™`HTTP`ä¸­å¤´éƒ¨ä¿¡æ¯çš„`User-Agent`ï¼Œç”¨äºé€šçŸ¥åç«¯HTTPè¯·æ±‚æ¥æºäºä»€ä¹ˆè®¾å¤‡ã€ä»€ä¹ˆå¹³å°ã€ä»€ä¹ˆæµè§ˆå™¨ã€‚



------



### screenå¯¹è±¡

PCç«¯ä¸€èˆ¬ä¸ç”¨ã€‚ğŸ• åç»­è¡¥å……å†…å®¹



------